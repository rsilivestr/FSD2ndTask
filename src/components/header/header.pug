include ../button/button
include ../logo/logo

mixin header(config = {})
  -
    const HEADER_DEFAULT_CONTENT = require('Components/header/defaults.pug.json');

    const nav = config.nav || HEADER_DEFAULT_CONTENT.nav;
    const username = config.username || HEADER_DEFAULT_CONTENT.username;
    const buttons = config.buttons || HEADER_DEFAULT_CONTENT.buttons;

  header.header(class=config.hasShadow && "header--has-shadow")&attributes(attributes)
    .header__wrapper
      +logoToxin.header__logo
      button.button.button--style_text.button--size_auto.header__btn--type_menu.header__btn--type_iconic
        i.material-icons menu
      nav.header__nav
        each link in nav
          a.header__navlink(
            href=link.url,
            class=link.current && "header__navlink--current",
            class=link.expandable && "header__navlink--has-subnav"
          )= link.title
      if !username
        .header__user-buttons
          each button in buttons
            +buttonLink({ title: button.title, style: button.style, size: button.size, url: button.url, })(
              class=`header__btn header__btn--type_${button.type}`,
              data-name=button.title
            )
      else
        .header__user-panel
          a.header__user-menu.header__btn--type_account(
            href='#some-url',
            data-name=username
          )= username
