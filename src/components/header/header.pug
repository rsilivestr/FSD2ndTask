include ../button/button
include ../logo/logo

mixin header(contents = {})
  -
    const HEADER_DEFAULT_CONTENTS = require('Components/header/defaults.pug.json');
    const mergedContents = Object.assign(HEADER_DEFAULT_CONTENTS, contents);

    const { nav, username, buttons, hasShadow } = mergedContents;

  header.header(class=hasShadow && "header--has-shadow")&attributes(attributes)
    .header__wrapper
      +logoToxin.header__logo
      button.button.button--style_text.button--size_auto.header__btn--type_menu.header__btn--type_iconic
        i.material-icons menu
      nav.header__nav
        each link in nav
          - const { url, current, expandable, title } = link;
          a.header__navlink(
            href=url,
            class=current && "header__navlink--current",
            class=expandable && "header__navlink--has-subnav"
          )= title
      if !username
        .header__user-buttons
          each button in buttons
            - const { title, type } = button;
            //- TODO Remove BEM mix
            +buttonLink(button)(
              class=`header__btn header__btn--type_${type}`,
              data-name=title
            )
      else
        .header__user-panel
          a.header__user-menu.header__btn--type_account(
            href='#some-url',
            data-name=username
          )= username
